{
  "name": "ğŸ§ª TESTE - Airdrops DeFiLlama",
  "nodes": [
    {
      "parameters": {},
      "id": "manual-trigger",
      "name": "ğŸš€ Iniciar Teste Manual",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "url": "https://SEU-APP.onrender.com/health",
        "options": {}
      },
      "id": "test-health",
      "name": "1ï¸âƒ£ Testar Health Check",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 200]
    },
    {
      "parameters": {
        "url": "https://SEU-APP.onrender.com/n8n/best-airdrops",
        "options": {
          "queryParametersUi": {
            "parameter": [
              {
                "name": "limit",
                "value": "3"
              }
            ]
          }
        }
      },
      "id": "test-airdrops",
      "name": "2ï¸âƒ£ Buscar 3 Melhores Airdrops",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "url": "https://SEU-APP.onrender.com/api/airdrops",
        "options": {}
      },
      "id": "test-all",
      "name": "3ï¸âƒ£ Buscar Todos Airdrops",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 400]
    },
    {
      "parameters": {
        "jsCode": "// Testar se Health Check funcionou\nconst healthData = $input.first().json;\n\nconsole.log('ğŸ¥ HEALTH CHECK:', healthData);\n\nif (healthData.status === 'online') {\n  return {\n    test: 'âœ… Health Check',\n    status: 'PASSOU',\n    data: healthData\n  };\n} else {\n  return {\n    test: 'âŒ Health Check',\n    status: 'FALHOU',\n    error: 'API offline'\n  };\n}"
      },
      "id": "process-health",
      "name": "ğŸ” Analisar Health",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 200]
    },
    {
      "parameters": {
        "jsCode": "// Testar dados dos airdrops\nconst airdropsData = $input.first().json;\n\nconsole.log('ğŸš€ AIRDROPS DATA:', airdropsData);\n\nif (airdropsData.success && airdropsData.airdrops && airdropsData.airdrops.length > 0) {\n  const airdrops = airdropsData.airdrops;\n  \n  console.log(`ğŸ“Š Encontrados ${airdrops.length} airdrops`);\n  \n  // Criar resumo\n  let resumo = `âœ… API FUNCIONANDO!\\n\\n`;\n  resumo += `ğŸ“ˆ Total: ${airdrops.length} airdrops\\n`;\n  resumo += `ğŸ• Atualizado: ${airdropsData.updated}\\n\\n`;\n  \n  resumo += `ğŸ† TOP AIRDROPS:\\n`;\n  airdrops.forEach((airdrop, index) => {\n    resumo += `${index + 1}. ${airdrop.name}\\n`;\n    resumo += `   ğŸ’° ${airdrop.value}\\n`;\n    resumo += `   â›“ï¸ ${airdrop.chain}\\n`;\n    resumo += `   ğŸ“Š ${airdrop.status}\\n\\n`;\n  });\n  \n  return {\n    test: 'âœ… Airdrops API',\n    status: 'PASSOU',\n    resumo: resumo,\n    count: airdrops.length,\n    airdrops: airdrops\n  };\n} else {\n  return {\n    test: 'âŒ Airdrops API',\n    status: 'FALHOU',\n    error: 'Dados invÃ¡lidos ou vazios',\n    data: airdropsData\n  };\n}"
      },
      "id": "process-airdrops",
      "name": "ğŸ” Analisar Airdrops",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "jsCode": "// Testar lista completa\nconst allData = $input.first().json;\n\nconsole.log('ğŸ“‹ ALL AIRDROPS:', allData);\n\nif (allData.success && allData.total > 0) {\n  return {\n    test: 'âœ… Lista Completa',\n    status: 'PASSOU',\n    total: allData.total,\n    lastUpdate: allData.lastUpdate\n  };\n} else {\n  return {\n    test: 'âŒ Lista Completa',\n    status: 'FALHOU',\n    error: 'Lista vazia ou erro'\n  };\n}"
      },
      "id": "process-all",
      "name": "ğŸ” Analisar Lista Completa",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 400]
    },
    {
      "parameters": {
        "jsCode": "// Compilar relatÃ³rio final de todos os testes\nconst allInputs = $input.all();\n\nlet relatorio = 'ğŸ§ª RELATÃ“RIO DE TESTES - MCP DEFILLAMA\\n';\nrelatorio += '=' .repeat(50) + '\\n\\n';\n\nallInputs.forEach((input, index) => {\n  const data = input.json;\n  relatorio += `${data.test}: ${data.status}\\n`;\n  \n  if (data.status === 'PASSOU') {\n    if (data.resumo) {\n      relatorio += data.resumo + '\\n';\n    } else if (data.total) {\n      relatorio += `   ğŸ“Š Total de itens: ${data.total}\\n`;\n    }\n  } else {\n    relatorio += `   âŒ Erro: ${data.error}\\n`;\n  }\n  \n  relatorio += '\\n';\n});\n\nrelatorio += 'ğŸ”— SUA API: https://SEU-APP.onrender.com\\n';\nrelatorio += 'ğŸ“± Para N8N: https://SEU-APP.onrender.com/n8n/best-airdrops?limit=5\\n\\n';\nrelatorio += 'ğŸ¤– Teste realizado via N8N';\n\nconsole.log('ğŸ“„ RELATÃ“RIO COMPLETO:');\nconsole.log(relatorio);\n\nreturn {\n  relatorio: relatorio,\n  timestamp: new Date().toISOString(),\n  testes_executados: allInputs.length\n};"
      },
      "id": "final-report",
      "name": "ğŸ“„ RelatÃ³rio Final",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 300]
    }
  ],
  "connections": {
    "ğŸš€ Iniciar Teste Manual": {
      "main": [
        [
          {
            "node": "1ï¸âƒ£ Testar Health Check",
            "type": "main",
            "index": 0
          },
          {
            "node": "2ï¸âƒ£ Buscar 3 Melhores Airdrops",
            "type": "main",
            "index": 0
          },
          {
            "node": "3ï¸âƒ£ Buscar Todos Airdrops",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1ï¸âƒ£ Testar Health Check": {
      "main": [
        [
          {
            "node": "ğŸ” Analisar Health",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "2ï¸âƒ£ Buscar 3 Melhores Airdrops": {
      "main": [
        [
          {
            "node": "ğŸ” Analisar Airdrops",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3ï¸âƒ£ Buscar Todos Airdrops": {
      "main": [
        [
          {
            "node": "ğŸ” Analisar Lista Completa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” Analisar Health": {
      "main": [
        [
          {
            "node": "ğŸ“„ RelatÃ³rio Final",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” Analisar Airdrops": {
      "main": [
        [
          {
            "node": "ğŸ“„ RelatÃ³rio Final",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” Analisar Lista Completa": {
      "main": [
        [
          {
            "node": "ğŸ“„ RelatÃ³rio Final",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "id": "test",
      "name": "teste"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "1"
}